{% load static %}
<!DOCTYPE html>
<html lang="es">
<head>
        <meta charset="UTF-8">
    <a class="visually-hidden-focusable" href="#main-content" style="position:absolute;left:8px;top:8px;z-index:1000;padding:8px;background:#000;color:#fff;border-radius:4px;">Saltar al contenido</a>
        <title>{% block title %}RuedaVision{% endblock %}</title>
        <!-- Bootstrap CSS -->
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
        <style>
            .visually-hidden { position: absolute !important; width: 1px; height: 1px; padding: 0; margin: -1px; overflow: hidden; clip: rect(0,0,0,0); white-space: nowrap; border: 0; }
            .visually-hidden-focusable:focus { position: static !important; width: auto; height: auto; margin: 0; overflow: visible; clip: auto; white-space: normal; }
            .visually-hidden-focusable { position: absolute; left:-9999px; }
            a:focus, button:focus, input:focus { outline: 3px solid rgba(0,123,255,.5); outline-offset: 2px; }
        </style>
        {% block extra_head %}{% endblock %}
</head>
<body style="background:#f5f5f5;">
        <nav class="navbar navbar-expand-lg navbar-dark" style="background-color:#F0B501;">
            <div class="container-fluid">
                    <a class="navbar-brand d-flex align-items-center" href="#">
                    <img src="{% static 'core/img/logo.png' %}" alt="" aria-hidden="true" height="33.6" style="border-radius: 5px;" class="d-inline-block align-text-top me-2">
                    <span style="font-weight:bold;font-size:1.25rem;letter-spacing:1px;color:#000;">Rueda Visión</span>
                </a>
                <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>
                <div class="collapse navbar-collapse" id="navbarNav">
                    <ul class="navbar-nav me-auto mb-2 mb-lg-0">
                        <!-- Aquí puedes agregar tus enlaces de menú principales -->
                    </ul>
                    <div class="d-flex align-items-center">
                                {% if user.is_authenticated %}
                                    <div class="dropdown">
                                        <a class="dropdown-toggle text-white text-decoration-none" href="#" role="button" id="userDropdown" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true" style="font-weight:bold;">
                                            <span aria-hidden="true" class="me-1">
                                                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" class="bi bi-person-circle" viewBox="0 0 16 16">
                                                  <path d="M11 5a2 2 0 1 1-4 0 2 2 0 0 1 4 0z"/>
                                                  <path fill-rule="evenodd" d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8zm8-7a7 7 0 0 0-5.468 11.37c.03-.4.22-1.24.742-1.82C4.6 8.9 6.1 8 8 8s3.4.9 4.726 1.55c.522.58.712 1.42.742 1.82A7 7 0 0 0 8 1z"/>
                                                </svg>
                                            </span>
                                            <span>{{ user.first_name }}</span>
                                        </a>
                                        <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="userDropdown">
                                            <li>
                                                <a class="dropdown-item d-flex align-items-center" href="#" role="menuitem">
                                                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-bag me-2" viewBox="0 0 16 16" aria-hidden="true">
                                                      <path d="M8 1.5A1.5 1.5 0 0 0 6.5 3v.5H4a1 1 0 0 0-1 1v8a1 1 0 0 0 1 1h8a1 1 0 0 0 1-1v-8a1 1 0 0 0-1-1H9.5V3A1.5 1.5 0 0 0 8 1.5zM5.5 3V3a2.5 2.5 0 0 1 5 0v.5h-5z"/>
                                                    </svg>
                                                    Pedidos
                                                </a>
                                            </li>
                                            <li>
                                                <a class="dropdown-item d-flex align-items-center" href="{% url 'usuario:usuario_edit' user.pk %}" role="menuitem">
                                                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-person me-2" viewBox="0 0 16 16" aria-hidden="true">
                                                      <path d="M8 8a3 3 0 1 0 0-6 3 3 0 0 0 0 6z"/>
                                                      <path fill-rule="evenodd" d="M8 9a5 5 0 0 0-4.546 2.916A.5.5 0 0 0 4 13h8a.5.5 0 0 0 .546-.084A5 5 0 0 0 8 9z"/>
                                                    </svg>
                                                    Cuenta
                                                </a>
                                            </li>
                                            <li>
                                                <a class="dropdown-item d-flex align-items-center" href="#" role="menuitem">
                                                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-question-circle me-2" viewBox="0 0 16 16" aria-hidden="true">
                                                      <path d="M8 1a7 7 0 1 0 0 14A7 7 0 0 0 8 1zM8 4a1 1 0 1 1 0 2 1 1 0 0 1 0-2z"/>
                                                      <path d="M5.255 7.786a.237.237 0 0 0-.247.247c0 .201.157.342.338.352.34.02.544.153.692.28.18.156.29.37.29.722v.1c0 .138.112.25.25.25h1c.138 0 .250-.112.25-.25v-.1c0-.681-.342-1.01-.767-1.354-.25-.21-.57-.44-1.02-.51-.243-.042-.385-.153-.427-.314a.237.237 0 0 0-.247-.247.237.237 0 0 0-.247.247z"/>
                                                    </svg>
                                                    Ayuda
                                                </a>
                                            </li>
                                            <li><hr class="dropdown-divider"></li>
                                            <li>
                                                <form action="{% url 'logout' %}" method="post" style="margin:0;">
                                                    {% csrf_token %}
                                                    <button type="submit" class="dropdown-item d-flex align-items-center" style="background:none;border:none;padding:0 1rem;" aria-label="Cerrar sesión">
                                                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-box-arrow-right me-2" viewBox="0 0 16 16" aria-hidden="true">
                                                          <path fill-rule="evenodd" d="M6 3.5A.5.5 0 0 1 6.5 3h6a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-6a.5.5 0 0 1-.5-.5V12h1v1h5V4h-5V5H6V3.5z"/>
                                                          <path fill-rule="evenodd" d="M.146 8.354a.5.5 0 0 1 0-.708L2.5 5.293a.5.5 0 1 1 .707.707L1.707 7.5H9.5a.5.5 0 0 1 0 1H1.707l1.5 1.5a.5.5 0 0 1-.707.707L.146 8.354z"/>
                                                        </svg>
                                                        <span>Cerrar sesión</span>
                                                    </button>
                                                </form>
                                            </li>
                                        </ul>
                                    </div>
                                {% else %}
                                    <a href="{% url 'login' %}" title="Iniciar sesión" style="background:none;border:none;padding:0;margin:0;outline:none;box-shadow:none;" aria-label="Iniciar sesión" accesskey="l">
                                        <img src="{% static 'core/img/login.svg' %}" alt="Icono iniciar sesión" style="height:2em;vertical-align:middle;display:inline;" aria-hidden="true">
                                        <span class="visually-hidden">Iniciar sesión (Alt+L)</span>
                                    </a>
                                {% endif %}
                    </div>
                </div>
            </div>
        </nav>
        <div class="container-fluid my-4" style="max-width:1400px;">
            <div class="row">
                {% if user.is_authenticated and user.rol == 'administrador' %}
                <aside class="col-md-3 col-lg-2 mb-4">
                    <div class="card sticky-top" style="top:20px;">
                        <div class="card-header bg-primary text-white">
                            <h5 class="mb-0">Menú Administrador</h5>
                        </div>
                        <div class="list-group list-group-flush">
                            <a href="{% url 'cliente:cliente_list' %}" class="list-group-item list-group-item-action d-flex align-items-center">
                                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" class="bi bi-people me-2" viewBox="0 0 16 16" aria-hidden="true">
                                    <path d="M15 14s1 0 1-1-1-4-5-4-5 3-5 4 1 1 1 1h8zm-7.978-1A.261.261 0 0 1 7 12.996c.001-.264.167-1.03.76-1.72C8.312 10.629 9.282 10 11 10c1.717 0 2.687.63 3.24 1.276.593.69.758 1.457.76 1.72l-.008.002a.274.274 0 0 1-.014.002H7.022zM11 7a2 2 0 1 0 0-4 2 2 0 0 0 0 4zm3-2a3 3 0 1 1-6 0 3 3 0 0 1 6 0zM6.936 9.28a5.88 5.88 0 0 0-1.23-.247A7.35 7.35 0 0 0 5 9c-4 0-5 3-5 4 0 .667.333 1 1 1h4.216A2.238 2.238 0 0 1 5 13c0-1.01.377-2.042 1.09-2.904.243-.294.526-.569.846-.816zM4.92 10A5.493 5.493 0 0 0 4 13H1c0-.26.164-1.03.76-1.724.545-.636 1.492-1.256 3.16-1.275zM1.5 5.5a3 3 0 1 1 6 0 3 3 0 0 1-6 0zm3-2a2 2 0 1 0 0 4 2 2 0 0 0 0-4z"/>
                                </svg>
                                Clientes
                            </a>
                            <a href="{% url 'proveedor:proveedor_list' %}" class="list-group-item list-group-item-action d-flex align-items-center">
                                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" class="bi bi-truck me-2" viewBox="0 0 16 16" aria-hidden="true">
                                    <path d="M0 3.5A1.5 1.5 0 0 1 1.5 2h9A1.5 1.5 0 0 1 12 3.5V5h1.02a1.5 1.5 0 0 1 1.17.563l1.481 1.85a1.5 1.5 0 0 1 .329.938V10.5a1.5 1.5 0 0 1-1.5 1.5H14a2 2 0 1 1-4 0H5a2 2 0 1 1-3.998-.085A1.5 1.5 0 0 1 0 10.5v-7zm1.294 7.456A1.999 1.999 0 0 1 4.732 11h5.536a2.01 2.01 0 0 1 .732-.732V3.5a.5.5 0 0 0-.5-.5h-9a.5.5 0 0 0-.5.5v7a.5.5 0 0 0 .294.456zM12 10a2 2 0 0 1 1.732 1h.768a.5.5 0 0 0 .5-.5V8.35a.5.5 0 0 0-.11-.312l-1.48-1.85A.5.5 0 0 0 13.02 6H12v4zm-9 1a1 1 0 1 0 0 2 1 1 0 0 0 0-2zm9 0a1 1 0 1 0 0 2 1 1 0 0 0 0-2z"/>
                                </svg>
                                Proveedores
                            </a>
                            <a href="{% url 'taller:taller_list' %}" class="list-group-item list-group-item-action d-flex align-items-center">
                                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" class="bi bi-tools me-2" viewBox="0 0 16 16" aria-hidden="true">
                                    <path d="M1 0 0 1l2.2 3.081a1 1 0 0 0 .815.419h.07a1 1 0 0 1 .708.293l2.675 2.675-2.617 2.654A3.003 3.003 0 0 0 0 13a3 3 0 1 0 5.878-.851l2.654-2.617.968.968-.305.914a1 1 0 0 0 .242 1.023l3.27 3.27a.997.997 0 0 0 1.414 0l1.586-1.586a.997.997 0 0 0 0-1.414l-3.27-3.27a1 1 0 0 0-1.023-.242L10.5 9.5l-.96-.96 2.68-2.643A3.005 3.005 0 0 0 16 3c0-.269-.035-.53-.102-.777l-2.14 2.141L12 4l-.364-1.757L13.777.102a3 3 0 0 0-3.675 3.68L7.462 6.46 4.793 3.793a1 1 0 0 1-.293-.707v-.071a1 1 0 0 0-.419-.814L1 0zm9.646 10.646a.5.5 0 0 1 .708 0l3 3a.5.5 0 0 1-.708.708l-3-3a.5.5 0 0 1 0-.708zM3 11l.471.242.529.026.287.445.445.287.026.529L5 13l-.242.471-.026.529-.445.287-.287.445-.529.026L3 15l-.471-.242L2 14.732l-.287-.445L1.268 14l-.026-.529L1 13l.242-.471.026-.529.445-.287.287-.445.529-.026L3 11z"/>
                                </svg>
                                Talleres
                            </a>
                            <a href="{% url 'usuario:usuario_list' %}" class="list-group-item list-group-item-action d-flex align-items-center">
                                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" class="bi bi-person-badge me-2" viewBox="0 0 16 16" aria-hidden="true">
                                    <path d="M6.5 2a.5.5 0 0 0 0 1h3a.5.5 0 0 0 0-1h-3zM11 8a3 3 0 1 1-6 0 3 3 0 0 1 6 0z"/>
                                    <path d="M4.5 0A2.5 2.5 0 0 0 2 2.5V14a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V2.5A2.5 2.5 0 0 0 11.5 0h-7zM3 2.5A1.5 1.5 0 0 1 4.5 1h7A1.5 1.5 0 0 1 13 2.5v10.795a4.2 4.2 0 0 0-.776-.492C11.392 12.387 10.063 12 8 12s-3.392.387-4.224.803a4.2 4.2 0 0 0-.776.492V2.5z"/>
                                </svg>
                                Usuarios
                            </a>
                        </div>
                    </div>
                </aside>
                {% elif user.is_authenticated and user.rol == 'taller' %}
                <aside class="col-md-3 col-lg-2 mb-4">
                    <div class="card sticky-top" style="top:20px;">
                        <div class="card-header bg-success text-white">
                            <h5 class="mb-0">Menú Taller</h5>
                        </div>
                        <div class="list-group list-group-flush">
                            <a href="{% url 'taller:taller_list' %}" class="list-group-item list-group-item-action d-flex align-items-center">
                                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" class="bi bi-building me-2" viewBox="0 0 16 16" aria-hidden="true">
                                    <path d="M4 2.5a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-1a.5.5 0 0 1-.5-.5v-1zm3 0a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-1a.5.5 0 0 1-.5-.5v-1zm3.5-.5a.5.5 0 0 0-.5.5v1a.5.5 0 0 0 .5.5h1a.5.5 0 0 0 .5-.5v-1a.5.5 0 0 0-.5-.5h-1zM4 5.5a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-1a.5.5 0 0 1-.5-.5v-1zM7.5 5a.5.5 0 0 0-.5.5v1a.5.5 0 0 0 .5.5h1a.5.5 0 0 0 .5-.5v-1a.5.5 0 0 0-.5-.5h-1zm2.5.5a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-1a.5.5 0 0 1-.5-.5v-1zM4.5 8a.5.5 0 0 0-.5.5v1a.5.5 0 0 0 .5.5h1a.5.5 0 0 0 .5-.5v-1a.5.5 0 0 0-.5-.5h-1zm2.5.5a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-1a.5.5 0 0 1-.5-.5v-1zm3.5-.5a.5.5 0 0 0-.5.5v1a.5.5 0 0 0 .5.5h1a.5.5 0 0 0 .5-.5v-1a.5.5 0 0 0-.5-.5h-1z"/>
                                    <path d="M2 1a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v14a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V1zm11 0H3v14h3v-2.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5V15h3V1z"/>
                                </svg>
                                Datos
                            </a>
                            <a href="#" class="list-group-item list-group-item-action d-flex align-items-center">
                                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" class="bi bi-arrow-left-right me-2" viewBox="0 0 16 16" aria-hidden="true">
                                    <path fill-rule="evenodd" d="M1 11.5a.5.5 0 0 0 .5.5h11.793l-3.147 3.146a.5.5 0 0 0 .708.708l4-4a.5.5 0 0 0 0-.708l-4-4a.5.5 0 0 0-.708.708L13.293 11H1.5a.5.5 0 0 0-.5.5zm14-7a.5.5 0 0 1-.5.5H2.707l3.147 3.146a.5.5 0 1 1-.708.708l-4-4a.5.5 0 0 1 0-.708l4-4a.5.5 0 1 1 .708.708L2.707 4H14.5a.5.5 0 0 1 .5.5z"/>
                                </svg>
                                Movimientos
                            </a>
                            <a href="#" class="list-group-item list-group-item-action d-flex align-items-center">
                                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" class="bi bi-box-seam me-2" viewBox="0 0 16 16" aria-hidden="true">
                                    <path d="M8.186 1.113a.5.5 0 0 0-.372 0L1.846 3.5l2.404.961L10.404 2l-2.218-.887zm3.564 1.426L5.596 5 8 5.961 14.154 3.5l-2.404-.961zm3.25 1.7-6.5 2.6v7.922l6.5-2.6V4.24zM7.5 14.762V6.838L1 4.239v7.923l6.5 2.6zM7.443.184a1.5 1.5 0 0 1 1.114 0l7.129 2.852A.5.5 0 0 1 16 3.5v8.662a1 1 0 0 1-.629.928l-7.185 2.874a.5.5 0 0 1-.372 0L.63 13.09a1 1 0 0 1-.63-.928V3.5a.5.5 0 0 1 .314-.464L7.443.184z"/>
                                </svg>
                                Entregas
                            </a>
                            <a href="#" class="list-group-item list-group-item-action d-flex align-items-center">
                                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" class="bi bi-stack me-2" viewBox="0 0 16 16" aria-hidden="true">
                                    <path d="m14.12 10.163 1.715.858c.22.11.22.424 0 .534L8.267 15.34a.598.598 0 0 1-.534 0L.165 11.555a.299.299 0 0 1 0-.534l1.716-.858 5.317 2.659c.505.252 1.1.252 1.604 0l5.317-2.66zM7.733.063a.598.598 0 0 1 .534 0l7.568 3.784a.3.3 0 0 1 0 .535L8.267 8.165a.598.598 0 0 1-.534 0L.165 4.382a.299.299 0 0 1 0-.535L7.733.063z"/>
                                    <path d="m14.12 6.576 1.715.858c.22.11.22.424 0 .534l-7.568 3.784a.598.598 0 0 1-.534 0L.165 7.968a.299.299 0 0 1 0-.534l1.716-.858 5.317 2.659c.505.252 1.1.252 1.604 0l5.317-2.659z"/>
                                </svg>
                                Inventario
                            </a>
                        </div>
                    </div>
                </aside>
                {% endif %}
                
                <main id="main-content" class="{% if user.is_authenticated and user.rol == 'administrador' or user.rol == 'taller' %}col-md-9 col-lg-10{% else %}col-12{% endif %}" role="main">
                    <div class="p-4 bg-white rounded shadow-sm" style="min-height:60vh;">
                        {% block content %}{% endblock %}
                    </div>
                </main>
            </div>
        </div>
        <!-- Bootstrap JS -->
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
        {% block extra_js %}{% endblock %}
</body>
</html>
